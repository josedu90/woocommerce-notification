"use strict";jQuery(document).ready(function(){if(jQuery("#message-purchased").length>0){var o=woo_notification;0==_woocommerce_notification_params.billing&&0==_woocommerce_notification_params.detect&&o.detect_address()}}),jQuery(window).load(function(){var o=woo_notification;if(o.loop=_woocommerce_notification_params.loop,o.init_delay=_woocommerce_notification_params.initial_delay,o.total=_woocommerce_notification_params.notification_per_page,o.display_time=_woocommerce_notification_params.display_time,o.next_time=_woocommerce_notification_params.next_time,o.ajax_url=_woocommerce_notification_params.ajax_url,o.products=_woocommerce_notification_params.products,o.messages=_woocommerce_notification_params.messages,o.image=_woocommerce_notification_params.image,o.redirect_target=_woocommerce_notification_params.redirect_target,o.time=_woocommerce_notification_params.time,o.display_effect=_woocommerce_notification_params.display_effect,o.hidden_effect=_woocommerce_notification_params.hidden_effect,o.messages=_woocommerce_notification_params.messages,o.names=_woocommerce_notification_params.names,o.detect=_woocommerce_notification_params.detect,o.billing=_woocommerce_notification_params.billing,o.in_the_same_cate=_woocommerce_notification_params.in_the_same_cate,o.message_custom=_woocommerce_notification_params.message_custom,o.message_number_min=_woocommerce_notification_params.message_number_min,o.message_number_max=_woocommerce_notification_params.message_number_max,o.time_close=_woocommerce_notification_params.time_close,o.show_close=_woocommerce_notification_params.show_close,0==_woocommerce_notification_params.billing&&0==_woocommerce_notification_params.detect){o.cities=[o.getCookie("wn_city")],o.country=[o.getCookie("wn_country")];var e=o.getCookie("wn_ip");e&&"undefined"!=e&&o.init()}else o.cities=_woocommerce_notification_params.cities,o.country=_woocommerce_notification_params.country,o.init()});var woo_notification={billing:0,in_the_same_cate:0,loop:0,init_delay:5,total:30,display_time:5,next_time:60,count:0,intel:0,wn_popup:0,id:0,messages:"",products:"",ajax_url:"",display_effect:"",hidden_effect:"",time:"",names:"",cities:"",country:"",message_custom:"",message_number_min:"",message_number_max:"",detect:0,time_close:0,show_close:0,shortcodes:["{first_name}","{city}","{state}","{country}","{product}","{product_with_link}","{time_ago}","{custom}"],init:function(){this.ajax_url?this.ajax_get_data():setTimeout(function(){woo_notification.get_product()},1e3*this.init_delay),jQuery("#message-purchased").on("mouseenter",function(){window.clearInterval(woo_notification.wn_popup)}).on("mouseleave",function(){woo_notification.message_show()})},detect_address:function(){this.getCookie("wn_ip")||jQuery.getJSON("https://extreme-ip-lookup.com/json/",function(o){o.query&&woo_notification.setCookie("wn_ip",o.query,86400),o.city&&woo_notification.setCookie("wn_city",o.city,86400),o.country&&woo_notification.setCookie("wn_country",o.country,86400)})},ajax_get_data:function(){var o;this.ajax_url&&(o=this.id?"&id="+this.id:"",jQuery.ajax({type:"POST",data:"action=woonotification_get_product"+o,url:this.ajax_url,success:function(o){var e=jQuery.parseJSON(o);e&&"undefined"!=e&&e.length>0&&(woo_notification.products=e,woo_notification.message_show(),setTimeout(function(){woo_notification.get_product()},1e3*woo_notification.init_delay))},error:function(o){}}))},message_show:function(){var o=this.count++;if(!(this.total<=o)){window.clearInterval(this.intel);var e=jQuery("#message-purchased");e.hasClass(this.hidden_effect)&&jQuery(e).removeClass(this.hidden_effect),jQuery(e).addClass(this.display_effect).css("display","flex"),this.audio(),this.wn_popup=setTimeout(function(){woo_notification.message_hide()},1e3*this.display_time)}},message_hide:function(){var o=jQuery("#message-purchased");o.hasClass(this.display_effect)&&jQuery(o).removeClass(this.display_effect),jQuery("#message-purchased").addClass(this.hidden_effect),jQuery("#message-purchased").fadeOut(1e3),window.clearInterval(this.wn_popup),this.getCookie("woo_notification_close")||this.loop&&(this.intel=setInterval(function(){woo_notification.get_product()},1e3*this.next_time))},get_time_string:function(){var o=this.random(0,3600*this.time),e=parseFloat(o/86400);return e>1?1==(e=parseInt(e))?e+" "+_woocommerce_notification_params.str_day:e+" "+_woocommerce_notification_params.str_days:(e=parseFloat(o/3600))>1?1==(e=parseInt(e))?e+" "+_woocommerce_notification_params.str_hour:e+" "+_woocommerce_notification_params.str_hours:(e=parseFloat(o/60))>1?1==(e=parseInt(e))?e+" "+_woocommerce_notification_params.str_min:e+" "+_woocommerce_notification_params.str_mins:e<10?_woocommerce_notification_params.str_few_sec:(e=parseInt(e))+" "+_woocommerce_notification_params.str_secs},get_product:function(){var o,e,t,i,a,n,s=this.products,c=this.messages,_=this.image,r=this.redirect_target;if("undefined"!=s&&s&&c&&s.length>0&&c.length>0){var m=c[n=woo_notification.random(0,c.length-1)],u=s[n=woo_notification.random(0,s.length-1)];parseInt(this.billing)>0&&parseInt(this.in_the_same_cate)<1?(o=u.first_name,i=u.city,e=u.state,t=u.country,a=u.time):(this.names&&"undefined"!=this.names?(n=woo_notification.random(0,this.names.length-1),o=this.names[n]):o="",this.cities&&"undefined"!=this.cities?(n=woo_notification.random(0,this.cities.length-1),i=this.cities[n]):i="",e="",t=this.country,a=this.get_time_string());var f='<span class="wn-popup-product-title">'+u.title+"</span>",d="<a ";r&&(d+='target="_blank"'),d+=' href="'+u.url+'">'+u.title+"</a>";var p="<small>"+_woocommerce_notification_params.str_about+" "+a+" "+_woocommerce_notification_params.str_ago+" </small>",l=this.message_custom,h="";u.thumb&&(_?(h="<a ",r&&(h+='target="_blank"'),h+=' href="'+u.url+'"><img src="'+u.thumb+'"></a>'):h='<img src="'+u.thumb+'">'),l=l.replace("{number}",this.random(this.message_number_min,this.message_number_max));for(var w=this.shortcodes,g=[o,i,e,t,f,d,p,l],y=m,v=w.length-1;v>=0;v--)y=y.replace(w[v],g[v]);var j="";parseInt(this.show_close)>0&&(j='<div id="notify-close"></div>');var b=h+"<p>"+y+"</p>"+j;jQuery("#message-purchased").html(b),this.close_notify(),woo_notification.message_show()}},close_notify:function(){jQuery("#notify-close").unbind(),jQuery("#notify-close").bind("click",function(){woo_notification.message_hide(),parseInt(woo_notification.time_close)>0&&(jQuery("#message-purchased").unbind(),woo_notification.setCookie("woo_notification_close",1,3600*parseInt(woo_notification.time_close)))})},audio:function(){if(jQuery("#woocommerce-notification-audio").length>0){var o=document.getElementById("woocommerce-notification-audio"),e=function(){o.play(),setTimeout(function(){o.stop()},0),document.removeEventListener("touchstart",e,!1)};document.addEventListener("touchstart",e,!1),o.play()}},random:function(o,e){o=parseInt(o),e=parseInt(e);var t=Math.random()*(e-o);return Math.round(t)+o},setCookie:function(o,e,t){var i=new Date;i.setTime(i.getTime()+1e3*t);var a="expires="+i.toUTCString();document.cookie=o+"="+e+";"+a+";path=/"},getCookie:function(o){for(var e=o+"=",t=decodeURIComponent(document.cookie).split(";"),i=0;i<t.length;i++){for(var a=t[i];" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(e))return a.substring(e.length,a.length)}return""}};